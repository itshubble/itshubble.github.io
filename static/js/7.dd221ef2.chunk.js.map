{"version":3,"sources":["server/api.js","util/httpStatus.js","server/crossStorage.js","visitor/authentication/LoginForm.js","visitor/authentication/Login.js"],"names":["defaultClient","version","prefix","process","createUser","firstName","lastName","emailAddress","password","axios","post","createSession","newClient","module","exports","OK","CREATED","ACCEPTED","NO_CONTENT","BAD_REQUEST","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","INTERNAL_SERVER_ERROR","newCrossStorage","a","result","crossStorage","CrossStorageClient","onConnect","connection","useStyles","makeStyles","theme","root","display","flexDirection","justifyContent","alignItems","item","width","margin","LoginForm","props","handleErrorMessage","classes","useState","identifier","setIdentifier","setPassword","history","useHistory","handleLogin","client","response","user","JSON","stringify","data","set","window","location","console","log","push","status","httpStatus","message","className","TextField","type","name","label","InputProps","endAdornment","InputAdornment","position","Icon","color","variant","required","value","onChange","event","target","validations","minLength","validationErrors","Button","disabled","onClick","height","background","palette","primary","contrastText","marginBottom","breakpoints","down","header","marginTop","textAlign","card","paddingLeft","paddingRight","content","padding","cardTitle","error","form","links","link","textDecoration","Login","errorMessage","setErrorMessage","useEffect","document","title","Grid","container","Hidden","smDown","xs","Typography","md","Card","CardContent","clasName","mdUp","to"],"mappings":"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","file":"static/js/7.dd221ef2.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst DEFAULT_API_VERSION = \"v1\";\n\nexport function newClient(version = DEFAULT_API_VERSION) {\n    const prefix = `${process.env.REACT_APP_API_URL}/api/${version}`;\n    return {\n        createUser: (firstName, lastName, emailAddress, password) =>\n            axios.post(`${prefix}/users`, {\n                firstName,\n                lastName,\n                emailAddress,\n                password,\n            }),\n        createSession: (emailAddress, password) =>\n            axios.post(`${prefix}/sessions`, {\n                emailAddress,\n                password,\n            }),\n    };\n}\n\nconst defaultClient = newClient();\n\nexport default defaultClient;\n","module.exports = {\n    OK: 200,\n    CREATED: 201,\n    ACCEPTED: 202,\n    NO_CONTENT: 204,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500,\n};\n","import crossStorage from \"cross-storage\";\n\nconst newCrossStorage = async () => {\n    const result = new crossStorage.CrossStorageClient(\n        `${process.env.REACT_APP_WEBSITE_URL}/hub.html`\n    );\n    await result.onConnect();\n    return result;\n};\n\nexport default {\n    connection: newCrossStorage(),\n};\n","import React, { useState } from \"react\";\nimport {\n    Button,\n    InputAdornment,\n    Icon,\n    TextField,\n    makeStyles,\n} from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport client from \"../../server/api\";\nimport httpStatus from \"../../util/httpStatus\";\nimport crossStorage from \"../../server/crossStorage\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    item: {\n        width: \"100%\",\n        margin: 8,\n    },\n}));\n\nfunction LoginForm(props) {\n    const { handleErrorMessage } = props;\n    const classes = useStyles();\n    const [identifier, setIdentifier] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const history = useHistory();\n\n    const canSubmit = () => identifier && password;\n    const handleLogin = async () => {\n        try {\n            const response = await client.createSession(identifier, password);\n            const user = JSON.stringify(response.data);\n\n            try {\n                const client = await crossStorage.connection;\n                client.set(\"user\", user);\n                window.location = `${process.env.REACT_APP_CONSOLE_URL}/analytics`;\n            } catch (error) {\n                console.log(\n                    \"Cannot establish connection to the cross storage hub.\"\n                );\n                console.log(error);\n                history.push(\"/error/500\");\n            }\n        } catch (error) {\n            const { response } = error;\n            if (response && response.status === httpStatus.BAD_REQUEST) {\n                handleErrorMessage(response.data.message);\n            } else {\n                console.log(response);\n                history.push(\"/error/500\");\n            }\n        }\n    };\n\n    return (\n        <div className={classes.root}>\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"emailAddress\"\n                label=\"Email Address\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                email\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={identifier}\n                onChange={(event) => setIdentifier(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"password\"\n                name=\"password\"\n                label=\"Password\"\n                validations={{\n                    minLength: 4,\n                }}\n                validationErrors={{\n                    minLength: \"Minimum character length is 4.\",\n                }}\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                vpn_key\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={password}\n                onChange={(event) => setPassword(event.target.value)}\n            />\n\n            <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"secondary\"\n                className={classes.item}\n                disabled={!canSubmit()}\n                onClick={handleLogin}\n                value=\"firebase\"\n            >\n                Login\n            </Button>\n        </div>\n    );\n}\n\nexport default LoginForm;\n","import React, { useEffect, useState } from \"react\";\nimport {\n    makeStyles,\n    Card,\n    CardContent,\n    Typography,\n    Hidden,\n} from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LoginForm from \"./LoginForm\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: 400,\n        background: \"linear-gradient(45deg, #2196F3 30%, #3F51B5 90%)\",\n        color: theme.palette.primary.contrastText,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginBottom: 200,\n        [theme.breakpoints.down(\"sm\")]: {\n            height: 250,\n        },\n    },\n    header: {\n        margin: 32,\n        marginTop: 128,\n        textAlign: \"center\",\n    },\n    card: {\n        paddingLeft: 16,\n        paddingRight: 16,\n        textAlign: \"center\",\n        [theme.breakpoints.down(\"sm\")]: {\n            marginTop: 64,\n        },\n    },\n    content: {\n        padding: 16,\n    },\n    cardTitle: {\n        marginTop: 16,\n        marginBottom: 16,\n        color: \"#5F6368\",\n        textAlign: \"center\",\n    },\n    error: {\n        marginTop: 16,\n        marginBottom: 16,\n        textAlign: \"center\",\n    },\n    form: {\n        margin: 16,\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    links: {\n        marginTop: 16,\n    },\n    link: {\n        display: \"block\",\n        marginTop: 8,\n        textDecoration: \"none\",\n    },\n}));\n\nfunction Login(props) {\n    const classes = useStyles();\n    const [errorMessage, setErrorMessage] = useState(\"\");\n\n    useEffect(() => {\n        document.title = \"Login | Hubble Subscriptions\";\n    }, []);\n\n    return (\n        <Grid container={true} className={classes.root}>\n            <Hidden smDown={true}>\n                <Grid item={true} className={classes.header} xs={12}>\n                    <Typography variant=\"h3\">Login to your account</Typography>\n                    <Typography variant=\"h5\">\n                        One step away from awesomeness\n                    </Typography>\n                </Grid>\n            </Hidden>\n\n            <Grid item={true} xs={12} md={3} className={classes.card}>\n                <Card>\n                    <CardContent clasName={classes.content}>\n                        <Hidden mdUp={true}>\n                            <Typography\n                                variant=\"h5\"\n                                className={classes.cardTitle}\n                            >\n                                Login to your account\n                            </Typography>\n                        </Hidden>\n\n                        {errorMessage && (\n                            <Typography className={classes.error} color=\"error\">\n                                {errorMessage}\n                            </Typography>\n                        )}\n                        <LoginForm handleErrorMessage={setErrorMessage} />\n                        <div className={classes.links}>\n                            <Hidden mdUp={true}>\n                                <Link className={classes.link} to=\"/register\">\n                                    Create Account\n                                </Link>\n                            </Hidden>\n                            <Link\n                                className={classes.link}\n                                to=\"/forgot-password\"\n                            >\n                                Recover Account\n                            </Link>\n                        </div>\n                    </CardContent>\n                </Card>\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default Login;\n"],"sourceRoot":""}