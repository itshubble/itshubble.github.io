{"version":3,"sources":["server/api.js","util/httpStatus.js","server/crossStorage.js","visitor/authentication/RegisterForm.js","visitor/authentication/Register.js"],"names":["defaultClient","version","prefix","process","createUser","firstName","lastName","emailAddress","password","axios","post","createSession","newClient","module","exports","OK","CREATED","ACCEPTED","NO_CONTENT","BAD_REQUEST","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","INTERNAL_SERVER_ERROR","newCrossStorage","a","result","crossStorage","CrossStorageClient","onConnect","connection","useStyles","makeStyles","theme","root","display","flexDirection","justifyContent","alignItems","item","width","margin","RegisterForm","props","handleErrorMessage","classes","useState","setFirstName","setLastName","setEmailAddress","setPassword","confirmPassword","setConfirmPassword","history","useHistory","handleRegister","client","response","user","JSON","stringify","data","set","window","location","console","log","push","status","httpStatus","message","className","TextField","type","name","label","InputProps","endAdornment","InputAdornment","position","Icon","color","variant","required","value","onChange","event","target","Button","disabled","onClick","height","background","palette","primary","contrastText","justify","marginBottom","breakpoints","down","header","marginTop","textAlign","card","paddingLeft","paddingRight","cardTitle","error","form","links","link","textDecoration","Register","errorMessage","setErrorMessage","useEffect","document","title","Grid","container","Hidden","smDown","xs","Typography","md","Card","CardContent","mdUp","to"],"mappings":"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","file":"static/js/8.bb395dff.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst DEFAULT_API_VERSION = \"v1\";\n\nexport function newClient(version = DEFAULT_API_VERSION) {\n    const prefix = `${process.env.REACT_APP_API_URL}/api/${version}`;\n    return {\n        createUser: (firstName, lastName, emailAddress, password) =>\n            axios.post(`${prefix}/users`, {\n                firstName,\n                lastName,\n                emailAddress,\n                password,\n            }),\n        createSession: (emailAddress, password) =>\n            axios.post(`${prefix}/sessions`, {\n                emailAddress,\n                password,\n            }),\n    };\n}\n\nconst defaultClient = newClient();\n\nexport default defaultClient;\n","module.exports = {\n    OK: 200,\n    CREATED: 201,\n    ACCEPTED: 202,\n    NO_CONTENT: 204,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500,\n};\n","import crossStorage from \"cross-storage\";\n\nconst newCrossStorage = async () => {\n    const result = new crossStorage.CrossStorageClient(\n        `${process.env.REACT_APP_WEBSITE_URL}/hub.html`\n    );\n    await result.onConnect();\n    return result;\n};\n\nexport default {\n    connection: newCrossStorage(),\n};\n","import React, { useState } from \"react\";\nimport {\n    Button,\n    InputAdornment,\n    Icon,\n    TextField,\n    makeStyles,\n} from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport client from \"../../server/api\";\nimport httpStatus from \"../../util/httpStatus\";\nimport crossStorage from \"../../server/crossStorage\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    item: {\n        width: \"100%\",\n        margin: 8,\n    },\n}));\n\nfunction RegisterForm(props) {\n    const { handleErrorMessage } = props;\n    const classes = useStyles();\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n    const [emailAddress, setEmailAddress] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n    const history = useHistory();\n\n    const canSubmit = () => {\n        return (\n            firstName &&\n            lastName &&\n            emailAddress &&\n            password &&\n            password === confirmPassword\n        );\n    };\n    const handleRegister = async () => {\n        try {\n            const response = await client.createUser(\n                firstName,\n                lastName,\n                emailAddress,\n                password\n            );\n            const user = JSON.stringify(response.data);\n            try {\n                const client = await crossStorage.connection;\n                client.set(\"user\", user);\n                window.location = `${process.env.REACT_APP_CONSOLE_URL}/analytics`;\n            } catch (error) {\n                console.log(\n                    \"Cannot establish connection to the cross storage hub.\"\n                );\n                console.log(error);\n                history.push(\"/error/500\");\n            }\n        } catch (error) {\n            const { response } = error;\n            if (response && response.status === httpStatus.BAD_REQUEST) {\n                handleErrorMessage(response.data.message);\n            } else {\n                console.log(response);\n                history.push(\"/error/500\");\n            }\n        }\n    };\n\n    return (\n        <div className={classes.root}>\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"firstName\"\n                label=\"First Name\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon color=\"action\">person</Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={firstName}\n                onChange={(event) => setFirstName(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"lastName\"\n                label=\"Last Name\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon color=\"action\">person</Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={lastName}\n                onChange={(event) => setLastName(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"email\"\n                label=\"Email\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                email\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={emailAddress}\n                onChange={(event) => setEmailAddress(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"password\"\n                name=\"password\"\n                label=\"Password\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                vpn_key\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={password}\n                onChange={(event) => setPassword(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"password\"\n                name=\"confirmPassword\"\n                label=\"Confirm Password\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                vpn_key\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={confirmPassword}\n                onChange={(event) => setConfirmPassword(event.target.value)}\n            />\n\n            <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.item}\n                disabled={!canSubmit()}\n                onClick={handleRegister}\n                value=\"legacy\"\n            >\n                Register\n            </Button>\n        </div>\n    );\n}\n\nexport default RegisterForm;\n","import React, { useEffect, useState } from \"react\";\nimport {\n    makeStyles,\n    Card,\n    CardContent,\n    Typography,\n    Hidden,\n} from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\nimport RegisterForm from \"./RegisterForm\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: 400,\n        background: \"linear-gradient(45deg, #2196F3 30%, #3F51B5 90%)\",\n        color: theme.palette.primary.contrastText,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        justify: \"center\",\n        marginBottom: 400,\n        [theme.breakpoints.down(\"sm\")]: {\n            height: 250,\n        },\n    },\n    header: {\n        margin: 32,\n        marginTop: 128,\n        textAlign: \"center\",\n    },\n    card: {\n        paddingLeft: 16,\n        paddingRight: 16,\n        textAlign: \"center\",\n        [theme.breakpoints.down(\"sm\")]: {\n            marginTop: 64,\n        },\n    },\n    cardTitle: {\n        marginTop: 16,\n        marginBottom: 16,\n        color: \"#5F6368\",\n        textAlign: \"center\",\n    },\n    error: {\n        marginTop: 16,\n        marginBottom: 16,\n        textAlign: \"center\",\n    },\n    form: {\n        margin: 16,\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    links: {\n        marginTop: 16,\n    },\n    link: {\n        display: \"block\",\n        marginTop: 8,\n        textDecoration: \"none\",\n    },\n}));\n\nfunction Register(props) {\n    const classes = useStyles();\n    const [errorMessage, setErrorMessage] = useState(\"\");\n\n    useEffect(() => {\n        document.title = \"Register | Hubble Subscriptions\";\n    }, []);\n\n    return (\n        <Grid container={true} className={classes.root}>\n            <Hidden smDown={true}>\n                <Grid item={true} className={classes.header} xs={12}>\n                    <Typography variant=\"h3\">Create your account</Typography>\n                    <Typography variant=\"h5\">\n                        One step away from awesomeness\n                    </Typography>\n                </Grid>\n            </Hidden>\n\n            <Grid item={true} xs={12} md={3} className={classes.card}>\n                <Card>\n                    <CardContent>\n                        <Hidden mdUp={true}>\n                            <Typography\n                                variant=\"h5\"\n                                className={classes.cardTitle}\n                            >\n                                Create your account\n                            </Typography>\n                        </Hidden>\n                        {errorMessage && (\n                            <Typography className={classes.error} color=\"error\">\n                                {errorMessage}\n                            </Typography>\n                        )}\n                        <RegisterForm handleErrorMessage={setErrorMessage} />\n                        <div className={classes.links}>\n                            <Hidden mdUp={true}>\n                                <Link className={classes.link} to=\"/login\">\n                                    Login\n                                </Link>\n                            </Hidden>\n                            <Link\n                                className={classes.link}\n                                to=\"/forgot-password\"\n                            >\n                                Recover Account\n                            </Link>\n                        </div>\n                    </CardContent>\n                </Card>\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default Register;\n"],"sourceRoot":""}